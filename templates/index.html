<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#9f7aea" />
  <meta name="color-scheme" content="light dark" />
  <meta name="description" content="Convert prayer timetable images to calendar files with AI-powered parsing" />
  <title>Prayer Times to Calendar Events Converter</title>
  <link rel="stylesheet" href="/static/style.css" />
  <link rel="stylesheet" href="/static/components.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🕌</text></svg>" />
  <script>
    // Prevent theme flicker
    (function() {
      const theme = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (theme === 'dark' || (!theme && prefersDark)) {
        document.documentElement.classList.add('dark');
      }
    })();
  </script>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  
  <main class="container" id="main-content">
    <div class="theme-toggle" aria-label="Theme selector">
      <button type="button" id="theme-btn" onclick="toggleTheme()">🌙 Dark</button>
      <button type="button" class="secondary-btn" onclick="resetAll()" title="Reset the page">♻️ Reset</button>
    </div>

    <header class="header">
      <h1>🕌 Prayer Times → Calendar Converter</h1>
      <p>Upload a prayer timetable image and generate an .ics calendar file you can import anywhere.</p>
    </header>


    <nav class="step-progress" role="navigation" aria-label="Progress through conversion steps">
      <ol class="steps">
        <li class="step active" id="step-1" aria-current="step">
          <div class="step-number" aria-hidden="true">1</div>
          <span class="step-text">Upload Image</span>
        </li>
        <div class="step-connector" aria-hidden="true"></div>
        <li class="step" id="step-2">
          <div class="step-number" aria-hidden="true">2</div>
          <span class="step-text">Review & Edit</span>
        </li>
        <div class="step-connector" aria-hidden="true"></div>
        <li class="step" id="step-3">
          <div class="step-number" aria-hidden="true">3</div>
          <span class="step-text">Download Calendar</span>
        </li>
      </ol>
    </nav>

    <form class="upload-form" onsubmit="event.preventDefault(); uploadFile();">
      <div class="upload-area" role="button" tabindex="0" aria-label="Click to upload or drag and drop an image">
        <div class="upload-icon">📸</div>
        <div class="upload-text">Click to upload or drag and drop</div>
        <div class="upload-subtext">Supports JPG, PNG and other image formats (max 10MB)<br><small>Prayer times will be displayed in 24-hour format</small></div>
        <input type="file" id="file-input" accept="image/*" />
      </div>

      <div class="file-info" id="file-info" style="display: none;" aria-live="polite"></div>

      <button type="submit" class="btn" id="upload-btn" disabled>
        Parse Prayer Timetable
      </button>
    </form>

    <div class="loading" id="loading" aria-live="polite">
      <div class="spinner"></div>
      <div>Parsing prayer timetable with AI…</div>
    </div>

    <div class="result" id="result" aria-live="polite"></div>
  </main>

  <footer>
    <p>Made with ✨ for easier prayer planning. <a href="https://github.com/mullestafa/prayercal" target="_blank" rel="noopener">GitHub</a></p>
  </footer>

  <script src="/static/app.js" defer></script>
</body>
</html>
